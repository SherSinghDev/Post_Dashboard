<!DOCTYPE html>
<html lang="en" class="h-100">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="keywords" content="">
    <meta name="author" content="">
    <meta name="robots" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Salero:Restaurant Admin Bootstrap 5 Template">
    <meta property="og:title" content="Salero:Restaurant Admin Bootstrap 5 Template">
    <meta property="og:description" content="Salero:Restaurant Admin Bootstrap 5 Template">
    <meta property="og:image" content="https://salero.dexignzone.com/xhtml/social-image.png">
    <meta name="format-detection" content="telephone=no">

    <!-- PAGE TITLE HERE -->
    <title>BSRF Parcel Mangament System</title>

    <!-- FAVICONS ICON -->
    <link rel="shortcut icon" type="image/png" href="/images/logo/logo.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/sweetalert2/11.23.0/sweetalert2.min.css">
    <link href="/css/style.css" rel="stylesheet">

</head>

<body class="vh-100" style=" background-position:center; overflow: scroll;">
    <div class="authincation py-5">
        <div class="container">
            <div class="row justify-content-center align-items-center">
                <div class="col-md-10">
                    <div class="authincation-content">
                        <div class="row no-gutters">
                            <div class="col-xl-12">
                                <div class="auth-form">
                                    <!-- <div class="text-center mb-3">
										<a href="index.html"><img src="images/logo/logo-full.png" alt=""></a>
									</div> -->



                                    <form action="/register" id="register-form" method="POST"
                                        enctype="multipart/form-data">
                                        <h3 class="mb-3 text-center">Membership Registration Form</h3>

                                        <!-- Row 1: Name & Gender -->
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <label class="mb-1"><strong>Full Name</strong></label>
                                                <input type="text" name="name" class="form-control"
                                                    placeholder="Enter your full name" required>
                                            </div>
                                            <div class="col-md-6">
                                                <label class="mb-1"><strong>Gender</strong></label>
                                                <select name="gender" style="padding-block: 11px;" class="form-select"
                                                    required>
                                                    <option value="">Select Gender</option>
                                                    <option>Male</option>
                                                    <option>Female</option>
                                                    <option>Other</option>
                                                </select>
                                            </div>
                                        </div>

                                        <!-- Row 2: DOB & Relation Type -->
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <label class="mb-1"><strong>Date of Birth</strong></label>
                                                <input type="date" name="dateOfBirth" class="form-control" required>
                                            </div>
                                            <div class="col-md-6">
                                                <label class="mb-1"><strong>Relation Type</strong></label>
                                                <div class="d-flex gap-2">
                                                    <select name="relationOption" id="relationOption"
                                                        style="padding-block: 11px; width: 100px;" class="form-select">
                                                        <option value="s/o">S/O</option>
                                                        <option value="d/o">D/O</option>
                                                        <option value="w/o">W/O</option>
                                                    </select>
                                                    <input type="text" id="relationType" name="relationType" class="form-control"
                                                        placeholder="Son of">
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Row 3: Profession & Blood Group -->
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <label class="mb-1"><strong>Profession</strong></label>
                                                <select name="profession" style="padding-block: 11px;"
                                                    class="form-select">
                                                    <option value="">Select Profession</option>
                                                    <option>Government Job</option>
                                                    <option>Private Job</option>
                                                    <option>Police</option>
                                                    <option>Army</option>
                                                    <option>Farmer</option>
                                                    <option>Self Business</option>
                                                    <option>Student</option>
                                                    <option>Social Worker</option>
                                                    <option>House Wife</option>
                                                </select>
                                            </div>
                                            <div class="col-md-6">
                                                <label class="mb-1"><strong>Blood Group</strong></label>
                                                <select name="bloodGroup" style="padding-block: 11px;"
                                                    class="form-select" required>
                                                    <option value="">Select Blood Group</option>
                                                    <option>A+</option>
                                                    <option>A-</option>
                                                    <option>B+</option>
                                                    <option>B-</option>
                                                    <option>O+</option>
                                                    <option>O-</option>
                                                    <option>AB+</option>
                                                    <option>AB-</option>
                                                </select>
                                            </div>
                                        </div>

                                        <!-- Row 4: State & District -->
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <label class="mb-1"><strong>State</strong></label>
                                                <input type="text" name="state" class="form-control" required>
                                            </div>
                                            <div class="col-md-6">
                                                <label class="mb-1"><strong>District</strong></label>
                                                <input type="text" name="district" class="form-control" required>
                                            </div>
                                        </div>

                                        <!-- Row 5: Block & Village -->
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <label class="mb-1"><strong>Block</strong></label>
                                                <input type="text" name="block" class="form-control">
                                            </div>
                                            <div class="col-md-6">
                                                <label class="mb-1"><strong>Village</strong></label>
                                                <input type="text" name="village" class="form-control">
                                            </div>
                                        </div>

                                        <!-- Full Address -->
                                        <div class="mb-3">
                                            <label class="mb-1"><strong>Full Address</strong></label>
                                            <textarea name="fullAddress" class="form-control"
                                                placeholder="Enter full address" required></textarea>
                                        </div>

                                        <!-- Row 6: Pin Code & Mobile -->
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <label class="mb-1"><strong>Pin Code</strong></label>
                                                <input type="text" name="pinCode" class="form-control" required>
                                            </div>
                                            <div class="col-md-6">
                                                <label class="mb-1"><strong>Mobile Number</strong></label>
                                                <input type="text" name="mobile" class="form-control"
                                                    placeholder="Enter mobile number" required>
                                            </div>
                                        </div>

                                        <!-- Row 7: Email & Aadhar -->
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <label class="mb-1"><strong>Email</strong></label>
                                                <input type="email" name="email" class="form-control"
                                                    placeholder="hello@example.com">
                                            </div>
                                            <div class="col-md-6">
                                                <label class="mb-1"><strong>Aadhar Number</strong></label>
                                                <input type="text" name="aadharNo" class="form-control"
                                                    placeholder="Enter Aadhar Number" required>
                                            </div>
                                        </div>

                                        <!-- Documents Upload -->
                                        <div class="mb-3">
                                            <label class="mb-1"><strong>Profile Picture</strong></label>
                                            <input type="file" name="profilePictureUrl" class="form-control">
                                        </div>

                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <label class="mb-1"><strong>ID Type</strong></label>
                                                <select name="idType" style="padding-block: 11px;" class="form-select">
                                                    <option value="">Select ID Type</option>
                                                    <option>Aadhar Card</option>
                                                    <option>PAN Card</option>
                                                    <option>Voter Card</option>
                                                    <option>Driving Licence</option>
                                                    <option>Rashan Card</option>
                                                    <option>Class 10th Marksheet</option>
                                                </select>
                                            </div>
                                            <div class="col-md-6">
                                                <label class="mb-1"><strong>Upload ID Document</strong></label>
                                                <input type="file" name="idDocumentUrl" class="form-control">
                                            </div>
                                        </div>

                                        <div class="mb-3">
                                            <label class="mb-1"><strong>Upload Other Document</strong></label>
                                            <input type="file" name="otherDocumentUrl" class="form-control">
                                        </div>

                                        <!-- Row 8: Membership & Referred By -->
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <label class="mb-1"><strong>Membership Type</strong></label>
                                                <select name="membershipType" class="form-select"
                                                    style="padding-block: 11px;" required>
                                                    <option value="">Select Membership</option>
                                                    <option>One year Membership Fee (₹365)</option>
                                                    <option>Life time membership Fee (₹500)</option>
                                                    <option>One year membership Fee And Life time membership Fee (₹865)
                                                    </option>
                                                </select>
                                            </div>
                                            <div class="col-md-6">
                                                <label class="mb-1"><strong>Referred By</strong></label>
                                                <input type="text" name="referenceName" class="form-control"
                                                    placeholder="Enter Referred By Name or Code">
                                            </div>
                                        </div>

                                        <div class="text-center mt-4">
                                            <button type="button" class="btn btn-primary pay-btn">Pay</button>
                                        </div>

                                        <div class="row my-3 pay-option">
                                            <div class="col-md-6 col-sm-12">
                                                <div class="card">
                                                    <div class="card-body pb-0">
                                                        <ul class="list-group list-group-flush">
                                                            <li
                                                                class="list-group-item d-flex px-0 justify-content-between">
                                                                <strong>Bank Details :</strong>
                                                            </li>
                                                            <li
                                                                class="list-group-item d-flex px-0 justify-content-between">
                                                                <strong>CUSTOMER NAME </strong>
                                                                <span class="mb-0">BINUPUR SEVA RESEARCH FOUNDATION
                                                                    (BSRF)</span>
                                                            </li>
                                                            <li
                                                                class="list-group-item d-flex px-0 justify-content-between">
                                                                <strong>Account number</strong>
                                                                <span class="mb-0">120028365298 </span>
                                                            </li>
                                                            <li
                                                                class="list-group-item d-flex px-0 justify-content-between">
                                                                <strong>IFSC</strong>
                                                                <span class="mb-0">CNRB0019448</span>
                                                            </li>
                                                            <li
                                                                class="list-group-item d-flex px-0 justify-content-between">
                                                                <strong>Bank Name</strong>
                                                                <span class="mb-0">CANARA BANK</span>
                                                            </li>
                                                        </ul>
                                                    </div>

                                                </div>
                                            </div>

                                            <div class="col-md-6 col-sm-12">
                                                <div class="card">
                                                    <div class="card-body pb-0 text-center">
                                                        <img src="/images/qr/qr1.webp" class="w-75" alt="">
                                                    </div>

                                                </div>
                                            </div>
                                        </div>

                                        <!-- Payment Details -->
                                        <h5 class="mt-4 pay-option">Payment Details</h5>
                                        <div class="row mb-3 pay-option">
                                            <div class="col-md-6">
                                                <label class="mb-1"><strong>Payment Mode</strong></label>
                                                <select name="payment[mode]" style="padding-block: 11px;"
                                                    class="form-select" required>
                                                    <option value="">Select Payment Mode</option>
                                                    <option>Bank Transfer Slip</option>
                                                    <option>Paytm</option>
                                                    <option>Google Pay</option>
                                                    <option>Phonepe</option>
                                                    <option>Amazon Pay</option>
                                                    <option>Cheque</option>
                                                    <option>Cash</option>
                                                    <option>Other</option>
                                                </select>
                                            </div>
                                            <div class="col-md-6">
                                                <label class="mb-1"><strong>Upload Payment Receipt</strong></label>
                                                <input type="file" name="payment[receiptUrl]" class="form-control">
                                            </div>

                                        </div>



                                        <div class="text-center mt-4 pay-option">
                                            <button type="submit" class="btn btn-primary btn-block">Submit
                                                Registration</button>
                                        </div>


                                    </form>


                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!--**********************************
	Scripts
***********************************-->
    <!-- Required vendors -->
    <script src="/vendor/global/global.min.js"></script>
    <script src="/js/custom.js"></script>
    <script src="/js/deznav-init.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert2/11.23.0/sweetalert2.min.js"></script>

    <script>
        // $('.pay-option').css('display', 'none')
        $('.pay-option').hide()

        $('.pay-btn').click(function () {
            // $('.pay-option').css('display', 'block')
            $('.pay-option').show()
        })

        $(document).on('change', '#relationOption', function () {
            let val = $(this).val()
            // console.log(val);
            let placeVal = ''

            if(val=='s/o'){
                placeVal = 'Son of'
            }
            if(val=='d/o'){
                placeVal = 'Daughter of'
            }
            if(val=='w/o'){
                placeVal = 'Wife of'
            }

            
            
            $('#relationType').attr('placeholder', placeVal)
        })

        $(document).on('submit', '#register-form', function (e) {
            e.preventDefault()
            let form = this


            let { username, email, role, city, referredBy, password } = form
            let inputs = { username, email, role, city, referredBy, password }
            // if (role.value == "Coordinator") {
            // }
            // else {
            //     inputs = { username, email, role, city, password }
            // }

            // console.log(inputs);

            let err = []

            for (let key in inputs) {
                // console.log(key);
                // console.log(!inputs[key].value && key != referredBy);

                if (!inputs[key].value && key != 'referredBy') {
                    // console.log(key);

                    let text = inputs[key].previousElementSibling.innerText
                    text = (text == "Register As") ? 'Choose Role' : "Enter " + text
                    err.push(text)
                }
            }


            if (err.length > 0) {
                Swal.fire({
                    icon: "error",
                    title: "Oops...",
                    html: err.join('<br>'),
                });
            }
            else {
                let data = {}
                for (let key in inputs) {
                    data = { ...data, [key]: inputs[key].value }
                }
                console.log(data);


                $.ajax({
                    url: '/auth/register',
                    method: "POST",
                    data: JSON.stringify(data),
                    headers: {
                        "Content-Type": "application/json"
                    },
                    success: function (data) {
                        console.log(data);
                        if (data.created) {
                            Swal.fire({
                                title: "Success!",
                                icon: "success",
                                text: data.message,
                                timer: 1000

                            });
                            window.location.href = '/users'
                            e.target.reset()
                        }
                        else {
                            Swal.fire({
                                icon: "error",
                                title: "Oops...",
                                text: data.message,
                                timer: 1000
                            });
                        }
                    },
                    error: function (err) {
                        console.log(err);
                    }
                })
            }
        })

        $(document).on('change', '#select-role', function (e) {

            if (e.target.value == 'Coordinator') {
                $('.referred').removeClass('d-none')
            }
            else {
                $('.referred').addClass('d-none')
            }
        })
    </script>

</body>

</html>